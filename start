#!/bin/sh

input=$1
BINDIR='bin'

while [ -z $target ]; do
  case $input in
    [Ss]*)
      target='server';;
    [Cc]*)
      ip='127.0.0.1'
      target='client';;
    *) read -p "['client'/'server']: " input;;
  esac
done

if [ ! -x $BINDIR/$target ]; then
  mkdir -p $BINDIR
  make $BINDIR/$target
fi

$BINDIR/$target $ip 5555
